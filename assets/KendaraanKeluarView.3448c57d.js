import{_ as g,r as _,o as n,c as i,d as m,a as t,F as p,f as b,g as u,t as d,h as v,w as y,v as I,p as E,i as S,j as c,k as j}from"./index.d4b95481.js";const A={name:"KendaraanKeluarView",data:function(){return{data:[],selectedIndex:-1,isLoading:!1,formEdit:{jenis:"",no_polisi:"",blok:"",waktu_masuk:new Date().toISOString().slice(0,10),status:""},formAdd:{jenis:0,no_polisi:"",blok:"",waktu_masuk:new Date().toISOString().slice(0,10),status:""}}},mounted(){this.load()},methods:{load(){fetch("http://localhost/parkir_php/pages/jeniskendaraan/index.php",{method:"GET"}).then(s=>{if(s.ok)return s.json()}).then(s=>{console.log(s.data),this.data=s.data,console.log(this.data)}).catch(()=>{alert("terjadi error")}).finally(()=>{this.isLoading=!1})},remove(){if(this.closeModal("modal-delete"),this.selectedIndex>=0){const s=this.data[this.selectedIndex],e=new URLSearchParams({jenis:s.jenis});fetch("http://localhost/parkir_php/pages/jeniskendaraan/delete.php",{method:"DELETE",headers:{"Content-Type":"application/x-www-form-urlencoded","API-Key":"secret"},body:e.toString()}).then(r=>(r.ok&&this.data.splice(this.selectedIndex,1),r.json())).then(r=>{console.log(r),r.status?alert("Sukses!"):alert("Error")}).catch(()=>{alert("Terjadi error")})}this.selectedIndex=-1},update(){if(this.closeModal("modal-update"),this.selectedIndex>=0){const s=new URLSearchParams({jenis:this.formEdit.jenis,no_polisi:this.formEdit.no_polisi,blok:this.formEdit.blok,waktu_masuk:this.formEdit.waktu_masuk,status:this.formEdit.status});fetch("http://localhost/parkir_php/pages/jeniskendaraan/update.php",{method:"PATCH",headers:{"Content-Type":"application/x-www-form-urlencoded","API-Key":"secret"},body:s.toString()}).then(e=>e.json()).then(e=>{e.status?this.data[this.selectedIndex]=e.data:alert(e.error)}).catch(e=>{alert("Terjadi error"+e.toString())}).finally(()=>{this.selectedIndex=-1})}},showDelete(s){this.showModal("modal-delete"),this.selectedIndex=s},showKonfirmasi(s){this.showModal("modal-konfirmasi"),this.selectedIndex=s;const e=this.data[s];this.formEdit.jenis=e.jenis,this.formEdit.no_polisi=e.no_polisi,this.formEdit.blok=e.blok,this.formEdit.waktu_masuk=e.waktu_masuk,this.formEdit.status=e.status,nextTick(()=>{document.getElementById("nama_update").focus()})},showAdd(){this.showModal("modal-add"),nextTick(()=>{document.getElementById("nama_add").focus()})},addNew(){this.closeModal("modal-add");const s=new URLSearchParams({jenis:this.formAdd.jenis,no_polisi:this.formAdd.no_polisi,blok:this.formAdd.blok,waktu_masuk:this.formAdd.waktu_masuk,status:this.formAdd.status});fetch("http://localhost/parkir_php/pages/jeniskendaraan/insert.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","API-Key":"secret"},body:s.toString()}).then(e=>e.json()).then(e=>{e.status?this.data.push(e.data):alert(e.error)}).catch(e=>{alert("Terjadi error"+e.toString())}).finally(()=>{this.formAdd.nama=""})},showModal(s){document.getElementById(s).classList.add("is-active")},closeModal(s){document.getElementById(s).classList.remove("is-active")}},setup(){return{collapsed,toggleSidebar}}},o=s=>(E("data-v-6b10926d"),s=s(),S(),s),C={class:"content"},M={class:"container"},K={class:"table"},T=o(()=>t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"Jenis Kendaraan"),t("th",null,"Nomor Polisi"),t("th",null,"Blok"),t("th",null,"Waktu Masuk"),t("th",null,"Status")])],-1)),D={key:0},x={class:"field has-addons"},L={class:"control"},B=o(()=>t("span",{class:"icon is-small"},[t("i",{class:"fas fa-arrow-right"})],-1)),N=o(()=>t("span",null,"Konfirmasi",-1)),P={class:"control"},V=["onClick"],U=o(()=>t("span",{class:"icon is-small"},[t("i",{class:"fas fa-pencil"})],-1)),R=o(()=>t("span",null,"Konfirmasi",-1)),H=[U,R],O={class:"control"},F=["onClick"],G=o(()=>t("span",{class:"icon is-small"},[t("i",{class:"fas fa-trash"})],-1)),J=o(()=>t("span",null,"Delete",-1)),q=[G,J],W={key:1,class:"notif"},z=o(()=>t("div",{class:"notification is-warning"},"Tidak ada data",-1)),Q=[z],X={key:0,class:"has-text-centered"},Y=o(()=>t("i",{class:"fa-solid fa-spinner fa-pulse"},null,-1)),Z=[Y],$={class:"modal",id:"modal-delete"},tt=o(()=>t("div",{class:"modal-background"},null,-1)),st={class:"modal-card"},et=o(()=>t("header",{class:"modal-card-head"},[t("p",{class:"modal-card-title"},"Delete")],-1)),at={class:"modal-card-body"},ot={key:0},dt=c(" ID "),lt=c(" NAMA "),nt=c(" MERK"),it=c(" JUMLAH"),rt=c(" HARGA"),ct={class:"modal-card-foot"},ht={class:"modal",id:"modal-update"},ut=o(()=>t("div",{class:"modal-background"},null,-1)),_t={class:"modal-card"},mt=o(()=>t("header",{class:"modal-card-head"},[t("p",{class:"modal-card-title"},"Update")],-1)),pt={class:"modal-card-body"},ft={key:0},kt={class:"field"},wt=o(()=>t("label",{class:"label",for:"nama_update"},"Nama kategori",-1)),gt={class:"control"},bt={class:"modal-card-foot"};function vt(s,e,r,yt,It,l){const f=_("SideBar"),k=_("router-link");return n(),i(p,null,[m(f),t("section",C,[t("div",M,[t("table",K,[T,s.data.length?(n(),i("tbody",D,[(n(!0),i(p,null,b(s.data,(a,h)=>(n(),i("tr",{key:h},[t("td",null,d(h+1),1),t("td",null,d(a.jenis),1),t("td",null,d(a.no_polisi),1),t("td",null,d(a.blok),1),t("td",null,d(a.waktu_masuk),1),t("td",null,d(a.status),1),t("td",null,[t("div",x,[t("p",L,[m(k,{class:"button is-success",to:{name:"detail",params:{jenis:a.jenis}}},{default:j(()=>[B,N]),_:2},1032,["to"])]),t("p",P,[t("button",{class:"button is-warning",onClick:w=>l.showKonfirmasi(h)},H,8,V)]),t("p",O,[t("button",{class:"button is-danger",onClick:w=>l.showDelete(h)},q,8,F)])])])]))),128))])):(n(),i("div",W,Q))])]),s.isLoading?(n(),i("div",X,Z)):u("",!0)]),t("div",$,[tt,t("div",st,[et,t("section",at,[s.selectedIndex>-1?(n(),i("div",ot,[t("ul",null,[t("li",null,[dt,t("strong",null,d(s.data[s.selectedIndex].jenis),1)]),t("li",null,[lt,t("strong",null,d(s.data[s.selectedIndex].no_polisi),1)]),t("li",null,[nt,t("strong",null,d(s.data[s.selectedIndex].blok),1)]),t("li",null,[it,t("strong",null,d(s.data[s.selectedIndex].waktu_masuk),1)]),t("li",null,[rt,t("strong",null,d(s.data[s.selectedIndex].status),1)])])])):u("",!0)]),t("footer",ct,[t("button",{class:"button is-danger",onClick:e[0]||(e[0]=(...a)=>l.remove&&l.remove(...a))},"Delete"),t("button",{class:"button",onClick:e[1]||(e[1]=a=>l.closeModal("modal-delete"))}," Close ")])])]),t("div",ht,[ut,t("div",_t,[mt,t("section",pt,[s.selectedIndex>-1?(n(),i("div",ft,[t("form",{onSubmit:e[3]||(e[3]=v((...a)=>l.update&&l.update(...a),["prevent"]))},[t("div",kt,[wt,t("div",gt,[y(t("input",{id:"nama_update",class:"input",type:"text",placeholder:"Nama kategori",required:"","onUpdate:modelValue":e[2]||(e[2]=a=>s.formEdit.namabarang=a)},null,512),[[I,s.formEdit.namabarang]])])])],32)])):u("",!0)]),t("footer",bt,[t("button",{class:"button is-success",onClick:e[4]||(e[4]=(...a)=>l.update&&l.update(...a))},"Update"),t("button",{class:"button",onClick:e[5]||(e[5]=a=>l.closeModal("modal-update"))}," Close ")])])])],64)}var St=g(A,[["render",vt],["__scopeId","data-v-6b10926d"]]);export{St as default};
